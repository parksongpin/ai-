<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>Music Mood - 당신의 감정을 음악으로</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/mainstyle.css') }}">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body>
    <div class="container">
        <!-- 상단 네비게이션 바 -->
        <div class="top-nav">
            <div class="user-info">
                <div class="level-badge" data-exp="{{ user_data.exp }}" data-level="{{ user_data.level }}">
                    <i class="fas fa-star"></i>
                    Level {{ user_data.level }}
                    <div class="progress-container">
                        <div class="progress-bar" id="progressBar"></div>
                    </div>
                </div>
                <div class="coin-display">
                    <i class="fas fa-coins"></i>
                    <span id="coin-amount">{{ user_data.coins }}</span>
                </div>
            </div>
            <a href="{{ url_for('index') }}" class="btn btn-secondary">
                <i class="fas fa-sign-out-alt"></i> 로그아웃
            </a>
        </div>

        <h1>🎵 Music Mood Premium</h1>
        <div class="welcome-message">
            <span style="font-size: 1.2em;">👋 {{ user_id }}님, 환영합니다!</span><br>
            프리미엄 음악 추천 서비스를 경험해보세요
        </div>

        <!-- 기본 기능 섹션 -->
        <div class="features">
            <div class="feature-card">
                <i class="fas fa-magic feature-icon"></i>
                <h3>기본 추천</h3>
                <p>무료로 당신의 기분에 맞는 음악을 추천받으세요</p>
                <a href="{{ url_for('survey') }}" class="btn btn-primary">
                    <i class="fas fa-music"></i> 추천 받기
                </a>
            </div>
            <div class="feature-card">
                <i class="fas fa-history feature-icon"></i>
                <h3>추천 기록</h3>
                <p>이전에 추천받은 곡들을 다시 들어보세요</p>
                <a href="{{ url_for('records') }}" class="btn btn-history">
                    <i class="fas fa-list"></i> 기록 보기
                </a>
            </div>
        </div>
    </div>

    <!-- JavaScript -->
    <script>
        // 사용자 정보 업데이트
        function updateUserInfo(data) {
            document.getElementById('coin-amount').textContent = data.coins;
            const progressBar = document.getElementById('progressBar');
            progressBar.style.width = `${(data.exp / (data.level * 100)) * 100}%`;
            document.querySelector('.level-badge').innerHTML = `
                <i class="fas fa-star"></i>
                Level ${data.level}
                <div class="progress-container">
                    <div class="progress-bar" id="progressBar" style="width: ${(data.exp / (data.level * 100)) * 100}%"></div>
                </div>
            `;
        }

        // 초기 진행 바 설정
        const levelBadge = document.querySelector('.level-badge');
        const exp = levelBadge.dataset.exp;
        const level = levelBadge.dataset.level;
        document.getElementById('progressBar').style.width = `${(exp / (level * 100)) * 100}%`;
    </script>
</body>
</html>